[OBJECT:INTERACTION]

{!TEMPLATE;TESB_SPIT_ROCK_INTERACTION;id;

{SHARED_OBJECT_EXISTS;INORGANIC:%{id};
[INTERACTION:SPIT %{id}]
	[I_SOURCE:CREATURE_ACTION]
	[I_TARGET:A:MATERIAL]
		[IT_MATERIAL:CONTEXT_MATERIAL]
	[I_TARGET:B:LOCATION]
		[IT_LOCATION:CONTEXT_LOCATION]
	[I_TARGET:C:CREATURE]
		[IT_LOCATION:CONTEXT_CREATURE]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:%{id}_TRIBUTE]
		[IT_MANUAL_INPUT:creature]
	[I_EFFECT:MATERIAL_EMISSION]
		[IE_TARGET:A]
		[IE_TARGET:B]
		[IE_TARGET:C]
		[IE_IMMEDIATE]
;%{id} does not exist.}
}

{!TEMPLATE;TESB_SPIT_MAGMA_INTERACTION;id;

{SHARED_OBJECT_EXISTS;INORGANIC:%{id};
[INTERACTION:SPIT MOLTEN %{id}]
	[I_SOURCE:CREATURE_ACTION]
	[I_TARGET:A:MATERIAL]
		[IT_MATERIAL:CONTEXT_MATERIAL]
	[I_TARGET:B:LOCATION]
		[IT_LOCATION:CONTEXT_LOCATION]
	[I_TARGET:C:CREATURE]
		[IT_LOCATION:CONTEXT_CREATURE]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:%{id}_TRIBUTE]
		[IT_MANUAL_INPUT:creature]
	[I_EFFECT:MATERIAL_EMISSION]
		[IE_TARGET:A]
		[IE_TARGET:B]
		[IE_TARGET:C]
		[IE_IMMEDIATE]
;%{id} does not exist.}
}		

{!TEMPLATE;TESB_EARTHQUAKE_INTERACTION;id;

{SHARED_OBJECT_EXISTS;INORGANIC:%{id};
[INTERACTION:%{id} EARTHQUAKE]
	[I_SOURCE:CREATURE_ACTION]
		[IS_HIST_STRING_1: staggered ]
		[IS_HIST_STRING_2: by causing a local earthquake]
	[I_TARGET:CLOSE:CREATURE]
		[IT_LOCATION:CONTEXT_CREATURE]
		[IT_FORBIDDEN:NO_DIZZINESS]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:%{id}_TRIBUTE]
	[I_TARGET:FAR:CREATURE]
		[IT_LOCATION:CONTEXT_CREATURE]
		[IT_FORBIDDEN:NO_DIZZINESS]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:%{id}_TRIBUTE]
	[I_EFFECT:ADD_SYNDROME]
		[IE_TARGET:CLOSE]
		[SYNDROME]
		[SYN_NAME:staggered by quake]
		[SYN_IMMUNE_CLASS:LIVING_STONE]
		[CE_DIZZINESS:SEV:100:PROB:100:START:0:PEAK:3:END:300]
	[I_EFFECT:ADD_SYNDROME]
		[IE_TARGET:FAR]
		[SYN_NAME:shaken by quake]
		[SYN_IMMUNE_CLASS:LIVING_STONE]
		[CE_DIZZINESS:SEV:50:PROB:100:START:0:PEAK:3:END:100]
;%{id} does not exist.}
}

{!TEMPLATE;TESB_THROW_STEEL_INTERACTION;id;

{SHARED_OBJECT_EXISTS;INORGANIC:%{id};
[INTERACTION:%{id} STEEL ATTACK]
	[I_SOURCE:CREATURE_ACTION]
	[I_TARGET:A:MATERIAL]
		[IT_MATERIAL:CONTEXT_MATERIAL]
	[I_TARGET:B:LOCATION]
		[IT_LOCATION:CONTEXT_LOCATION]
	[I_TARGET:C:CREATURE]
		[IT_LOCATION:CONTEXT_CREATURE]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:%{id}_TRIBUTE]
		[IT_MANUAL_INPUT:creature]
	[I_EFFECT:MATERIAL_EMISSION]
		[IE_TARGET:A]
		[IE_TARGET:B]
		[IE_TARGET:C]
		[IE_IMMEDIATE]
;%{id} does not exist.}
}		

{!TEMPLATE;TESB_THROW_WATER_INTERACTION;id;

{SHARED_OBJECT_EXISTS;INORGANIC:%{id};
[INTERACTION:%{id} AQUIFER ATTACK]
	[I_SOURCE:CREATURE_ACTION]
	[I_TARGET:A:MATERIAL]
		[IT_MATERIAL:CONTEXT_MATERIAL]
	[I_TARGET:B:LOCATION]
		[IT_LOCATION:CONTEXT_LOCATION]
	[I_TARGET:C:CREATURE]
		[IT_LOCATION:CONTEXT_CREATURE]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:%{id}_TRIBUTE]
		[IT_MANUAL_INPUT:creature]
	[I_EFFECT:MATERIAL_EMISSION]
		[IE_TARGET:A]
		[IE_TARGET:B]
		[IE_TARGET:C]
		[IE_IMMEDIATE]
;%{id} does not exist.}
}		


{TESB_EARTHQUAKE_INTERACTION;ANDESITE}

{TESB_EARTHQUAKE_INTERACTION;BASALT}

{TESB_THROW_STEEL_INTERACTION;CHALK}

{TESB_SPIT_ROCK_INTERACTION;CHERT}

{TESB_SPIT_ROCK_INTERACTION;CLAYSTONE}

{TESB_THROW_WATER_INTERACTION;CONGLOMERATE}

{TESB_EARTHQUAKE_INTERACTION;DACITE}

{TESB_SPIT_MAGMA_INTERACTION;DIORITE}

{TESB_THROW_STEEL_INTERACTION;DOLOMITE}

{TESB_SPIT_MAGMA_INTERACTION;GABBRO}

{TESB_SPIT_ROCK_INTERACTION;GNEISS}

{TESB_SPIT_MAGMA_INTERACTION;GRANITE}

{TESB_THROW_STEEL_INTERACTION;LIMESTONE}

{TESB_THROW_STEEL_INTERACTION;MARBLE}

{TESB_SPIT_ROCK_INTERACTION;MUDSTONE}

{TESB_SPIT_ROCK_INTERACTION;PHYLLITE}

{TESB_SPIT_ROCK_INTERACTION;QUARTZITE}

{TESB_EARTHQUAKE_INTERACTION;RHYOLITE}

{TESB_SPIT_ROCK_INTERACTION;ROCK_SALT}

{TESB_THROW_WATER_INTERACTION;SANDSTONE}

{TESB_SPIT_ROCK_INTERACTION;SCHIST}

{TESB_SPIT_ROCK_INTERACTION;SHALE}

{TESB_SPIT_ROCK_INTERACTION;SILTSTONE}

{TESB_SPIT_ROCK_INTERACTION;SLATE}

{@IF;$TESB_SECRETS;NO;
Secrets feature has been disabled.;
Sedimentary stones are in the EARTH and MINERALS Spheres.  Rock salt is also in the SALT Sphere.
Metamorphic stones are in the EARTH and MOUNTAINS Spheres.
Igneous intrusive stones are in the MOUNTAINS and CAVERNS Spheres.
Igneous extrusive stones are in the MOUNTAINS and VOLCANOS Spheres.
Flux stones are in the MINERALS and METALS Spheres.
{!TEMPLATE;TESB_FAVOR_INTERACTION;id;name;name2;type;sphere1;sphere2;sphere3=nil;
{SHARED_OBJECT_EXISTS;INORGANIC:%{id};
[INTERACTION:%{id} FAVOR]
	[I_SOURCE:SECRET]
		[IS_NAME:the secret of peace with Living %{name}]
		[IS_SPHERE:%{sphere1}]
		[IS_SECRET_GOAL:IMMORTALITY] Only goal that works in worldgen.  I feel bad offering such a bait-and-switch :-)
		[IS_SECRET:SUPERNATURAL_LEARNING_POSSIBLE]
		[IS_SECRET:MUNDANE_RESEARCH_POSSIBLE]
		[IS_SECRET:MUNDANE_TEACHING_POSSIBLE]
		[IS_SECRET:MUNDANE_RECORDING_POSSIBLE:objects/text/book_tesb.txt:objects/text/secret_tesb_%{name2}.txt]
	[I_SOURCE:SECRET]
		[IS_NAME:the secret of peace with Living %{name}]
		[IS_SPHERE:%{sphere2}]
		[IS_SECRET_GOAL:IMMORTALITY]
		[IS_SECRET:SUPERNATURAL_LEARNING_POSSIBLE]
		[IS_SECRET:MUNDANE_RESEARCH_POSSIBLE]
		[IS_SECRET:MUNDANE_TEACHING_POSSIBLE]
		[IS_SECRET:MUNDANE_RECORDING_POSSIBLE:objects/text/book_tesb.txt:objects/text/secret_tesb_%{name2}.txt]
	{@IF;%{sphere3};nil;No third sphere.;
	[I_SOURCE:SECRET]
		[IS_NAME:the secret of peace with Living %{name}]
		[IS_SPHERE:%{sphere3}]
		[IS_SECRET_GOAL:IMMORTALITY]
		[IS_SECRET:SUPERNATURAL_LEARNING_POSSIBLE]
		[IS_SECRET:MUNDANE_RESEARCH_POSSIBLE]
		[IS_SECRET:MUNDANE_TEACHING_POSSIBLE]
		[IS_SECRET:MUNDANE_RECORDING_POSSIBLE:objects/text/book_tesb.txt:objects/text/secret_tesb_%{name2}.txt]
	}
	[I_TARGET:A:CREATURE]
		[IT_LOCATION:CONTEXT_CREATURE]
		[IT_REQUIRES:CAN_LEARN]
		[IT_REQUIRES:CAN_SPEAK]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:%{id}_TRIBUTE]
	[I_EFFECT:ADD_SYNDROME]
		[IE_TARGET:A]
		[IE_IMMEDIATE]
		[IE_ARENA_NAME:%{name} Favor]
		[SYNDROME]
			[SYN_NAME:%{name2} favor]
			[SYN_CLASS:%{id}_TRIBUTE]
			[CE_MATERIAL_FORCE_MULTIPLIER:MAT_MULT:INORGANIC:%{id}:1:2:START:0]
            {@IF;%{type};standard;
			[CE_CAN_DO_INTERACTION:START:0]
				[CDI:INTERACTION:SPIT %{id}]
				[CDI:ADV_NAME:Hurl rock]
				[CDI:VERB:shoot a %{name2} rock:shoots a %{name2} rock:shoot a %{name2} rock]
				[CDI:USAGE_HINT:ATTACK]
				[CDI:BP_REQUIRED:BY_CATEGORY:HAND]
				[CDI:MATERIAL:INORGANIC:%{id}:SOLID_GLOB]
				[CDI:TARGET:C:LINE_OF_SIGHT]
				[CDI:TARGET_RANGE:C:15]
				[CDI:MAX_TARGET_NUMBER:C:1]
				[CDI:WAIT_PERIOD:33]
			}
			{@IF;%{type};magma;
			[CE_CAN_DO_INTERACTION:START:0]
				[CDI:INTERACTION:SPIT MOLTEN %{id}]
				[CDI:ADV_NAME:Hurl magma]
				[CDI:VERB:shoot molten %{name2}:shoots molten %{name2}:shoot molten %{name2}]
				[CDI:USAGE_HINT:ATTACK]
				[CDI:BP_REQUIRED:BY_CATEGORY:HAND]
				[CDI:MATERIAL:INORGANIC:%{id}:LIQUID_GLOB]
				[CDI:TARGET:C:LINE_OF_SIGHT]
				[CDI:TARGET_RANGE:C:15]
				[CDI:MAX_TARGET_NUMBER:C:1]
				[CDI:WAIT_PERIOD:50]
			}
			{@IF;%{type};earthquake;
			[CE_CAN_DO_INTERACTION:START:0]
				[CDI:INTERACTION:%{id} EARTHQUAKE]
				[CDI:ADV_NAME:%{name} geomancy]
				[CDI:USAGE_HINT:ATTACK]
				[CDI:BP_REQUIRED:BY_CATEGORY:FOOT]
				[CDI:VERB:stomp the ground causing an earthquake:stomps the ground causing an earthquake:stomp the ground causing an earthquake]
				[CDI:TARGET:CLOSE:TOUCHABLE]
				[CDI:TARGET_RANGE:CLOSE:1]
				[CDI:TARGET:FAR:LINE_OF_SIGHT]
				[CDI:TARGET_RANGE:FAR:5]
				[CDI:WAIT_PERIOD:100]
			}
			{C;To do: convert to a syndrome-laden inorganic, then increase the cooldown time.}
			{@IF;%{type};aquifer;
			[CE_CAN_DO_INTERACTION:START:0]
				[CDI:INTERACTION:%{id} AQUIFER ATTACK]
				[CDI:ADV_NAME:Hurl aquifer water]
				[CDI:VERB:shoot aquifer water:shoots aquifer water:shoot aquifer water]
				[CDI:USAGE_HINT:ATTACK]
				[CDI:BP_REQUIRED:BY_CATEGORY:HAND]
				[CDI:MATERIAL:INORGANIC:WATER:LIQUID_GLOB]
				[CDI:TARGET:C:LINE_OF_SIGHT]
				[CDI:TARGET_RANGE:C:15]
				[CDI:MAX_TARGET_NUMBER:C:1]
				[CDI:WAIT_PERIOD:33]
			}
			{@IF;%{type};flux;
			[CE_CAN_DO_INTERACTION:START:0]
				[CDI:INTERACTION:%{id} STEEL ATTACK]
				[CDI:ADV_NAME:Hurl molten steel]
				[CDI:VERB:shoot molten steel:shoots molten steel:shoot molten steel]
				[CDI:USAGE_HINT:ATTACK]
				[CDI:BP_REQUIRED:BY_CATEGORY:HAND]
				[CDI:MATERIAL:INORGANIC:STEEL:LIQUID_GLOB]
				[CDI:TARGET:C:LINE_OF_SIGHT]
				[CDI:TARGET_RANGE:C:15]
				[CDI:MAX_TARGET_NUMBER:C:1]
				[CDI:WAIT_PERIOD:50]
			}
;%{id} does not exist.}
}
{TESB_FAVOR_INTERACTION;ANDESITE;Andesite;andesite;earthquake;MOUNTAINS;VOLCANOS}

{TESB_FAVOR_INTERACTION;BASALT;Basalt;basalt;earthquake;MOUNTAINS;VOLCANOS}

{TESB_FAVOR_INTERACTION;CHALK;Chalk;chalk;flux;MINERALS;METALS}

{TESB_FAVOR_INTERACTION;CHERT;Chert;chert;standard;EARTH;MINERALS}

{TESB_FAVOR_INTERACTION;CLAYSTONE;Claystone;claystone;standard;EARTH;MINERALS}

{TESB_FAVOR_INTERACTION;CONGLOMERATE;Conglomerate;conglomerate;aquifer;EARTH;MINERALS}

{TESB_FAVOR_INTERACTION;DACITE;Dacite;dacite;earthquake;MOUNTAINS;VOLCANOS}

{TESB_FAVOR_INTERACTION;DIORITE;Diorite;diorite;magma;MOUNTAINS;CAVERNS}

{TESB_FAVOR_INTERACTION;DOLOMITE;Dolomite;dolomite;flux;MINERALS;METALS}

{TESB_FAVOR_INTERACTION;GABBRO;Gabbro;gabbro;magma;MOUNTAINS;CAVERNS}

{TESB_FAVOR_INTERACTION;GNEISS;Gneiss;gneiss;standard;EARTH;MOUNTAINS}

{TESB_FAVOR_INTERACTION;GRANITE;Granite;granite;magma;MOUNTAINS;CAVERNS}

{TESB_FAVOR_INTERACTION;LIMESTONE;Limestone;limestone;flux;MINERALS;METALS}

{TESB_FAVOR_INTERACTION;MARBLE;Marble;marble;flux;MINERALS;METALS}

{TESB_FAVOR_INTERACTION;MUDSTONE;Mudstone;mudstone;standard;EARTH;MINERALS}

{TESB_FAVOR_INTERACTION;PHYLLITE;Phyllite;phyllite;standard;EARTH;MOUNTAINS}

{TESB_FAVOR_INTERACTION;QUARTZITE;Quartzite;quartzite;standard;EARTH;MOUNTAINS}

{TESB_FAVOR_INTERACTION;RHYOLITE;Rhyolite;rhyolite;earthquake;MOUNTAINS;VOLCANOS}

{TESB_FAVOR_INTERACTION;ROCK_SALT;Rock Salt;rocksalt;standard;EARTH;MINERALS;SALT}

{TESB_FAVOR_INTERACTION;SANDSTONE;Sandstone;sandstone;aquifer;EARTH;MINERALS}

{TESB_FAVOR_INTERACTION;SCHIST;Schist;schist;standard;EARTH;MOUNTAINS}

{TESB_FAVOR_INTERACTION;SHALE;Shale;shale;standard;EARTH;MINERALS}

{TESB_FAVOR_INTERACTION;SILTSTONE;Siltstone;siltstone;standard;EARTH;MINERALS}

{TESB_FAVOR_INTERACTION;SLATE;Slate;slate;standard;EARTH;MOUNTAINS}
}
